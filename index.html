<html lang="ar" dir="rtl">
<head>

    <meta charset="UTF-8"></meta>

    <meta content="width=device-width, initial-scale=1.0" name="viewport"></meta>

    <title>اختبار إلكتروني</title>

    <style>
 

        body { font-family: Arial, sans-serif; }

        .hidden { display: none; }

        #result { margin-top: 20px; }

        #timer { font-size: 20px; color: red; font-weight: bold; } /* زيادة سمالخط */

        h2 { font-size: 22px; font-weight: bold; color: #000000; } /* تغيير اللون إلى الأسود وزيادة السُمك */

        label { font-size: 18px; font-weight: bold; color: #333333; } /* زيادة سمك الخط وتحسين اللون */

        #timer { font-size: 20px; color: red; }

        h2 { font-size: 22px; }

        label { font-size: 18px; }

        .correct { font-weight: bold; color: red; }

        /* CSS لتحريك الزر */

        #next-button {

            position: absolute; /* يسمح بتحديد الموقع */

            left: 20px; /* المسافة من الجانب الأيسر */

            bottom: 20px; /* المسافة من الأسفل */

            padding: 10px 20px; /* لتعديل حجم الزر */

        }

        #popup {

    position: fixed;

    top: 30%;

    left: 50%;

    transform: translate(-50%, -50%);

    background-color: #fff;

    border: 1px solid #ccc;

    padding: 20px;

    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);

    z-index: 1000;

    text-align: center;

    display: none;

}

#popup button {

    margin-top: 10px;

    padding: 5px 10px;

    background-color: red;

    color: white;

    border: none;

    cursor: pointer;

}

#popup button:hover {

    background-color: darkred;

}

    </style>

</head>

<body>

    <h2 class="header-one">

        التدريب علي اختبارات الجهاز المركزى


   

    </div>
<div id="login-container">

    <label for="password">أدخل كلمة المرور:</label>

    <input id="password" type="password" />

    <br /><br />

    <label for="duration">حدد مدة الاختبار (بالدقائق):</label>

    <input id="duration" min="1" type="number" value="5" />
<br /><br />
    <label for="questionCount">حدد عدد الأسئلة:</label>
    <input id="questionCount" min="1" max="55" type="number" value="20" />
<br /><br />

    <button onclick="checkPassword()">دخول</button>

</div>

<div class="hidden" id="quiz">

    <div id="timer">5:00</div>

    <div id="question-info">السؤال 1 من 20</div>

    <form id="quizForm">

        <div id="question-container"></div>
      <br><br><br>

        <button id="next-button" onclick="nextQuestion()" type="button">التالي</button>

    </form>

</div>

<div class="hidden" id="result"></div>

<div id="popup" class="hidden">

    <p>
        هذا النموذج خاص بجروب المشتركين ويتم فتحه مجانا في وقت الفجر 
    </p>

    <button onclick="closePopup()">إغلاق</button>

</div>

<script>

     const questions = [
   
     {
    "question": "لو تخاصم اللصوص ظهرت المسروقات، الفعل تخاصم",
    "options": [
      "فعل ماض مجزوم",
      "فعل ماض مبني",
      "فعل مضارع مرفوع",
      "فعل مضارع مجزوم"
    ],
    "answer": "فعل ماض مبني"
  },
  {
    "question": "العمَّالُ يعملون، الفاعل ........",
    "options": [
      "العمال",
      "واو الجماعة",
      "ضمير مستتر"
    ],
    "answer": "واو الجماعة"
  },
  {
    "question": "الفرق بين النون في (الرجال يدعون – النساء يدعون) على الترتيب",
    "options": [
      "نون النسوة، علامة الرفع",
      "علامة الرفع، علامة الرفع",
      "نون نسوة، نون النسوة",
      "علامة الرفع، نون النسوة"
    ],
    "answer": "علامة الرفع، نون النسوة"
  },
  {
    "question": "سبب كتابة الهمزة على نبرة في (قائد)",
    "options": [
      "الهمزة ساكنة",
      "الهمزة بعد ألف مد",
      "الهمزة متوسطة",
      "الهمزة مكسورة بعد مد"
    ],
    "answer": "الهمزة مكسورة بعد مد"
  },
  {
    "question": "سبب كتابة الهمزة في (تنبأ) على ألف",
    "options": [
      "الهمزة متطرفة بعد فتحة",
      "الهمزة مفتوحة",
      "الهمزة متطرفة"
    ],
    "answer": "الهمزة متطرفة بعد فتحة"
  },
  {
    "question": "حدث حادث في مكان ونجا 2 فقط، الجمل صحيحة ماعدا",
    "options": [
      "ما نجا إلا موظفتان",
      "نجا الموظفون إلا موظفتين",
      "ما نجا من حادث الماس إلا موظفتان",
      "ما نجا الموظفون إلا موظفتين - موظفتان"
    ],
    "answer": "نجا الموظفون إلا موظفتين"
  },
  {
    "question": "الفعل الذي اتصل به نون النسوة يُبنى على",
    "options": [
      "السكون",
      "الفتح"
    ],
    "answer": "السكون"
  },
  {
    "question": "أعرب ما تحته خط، (ما كان المجتهد ليَرْسُب)",
    "options": [
      "فعل مضارع مرفوع",
      "فعل مضارع منصوب",
      "فعل مضارع مجزوم",
      "فعل مضارع مبني"
    ],
    "answer": "فعل مضارع منصوب"
  },
  {
    "question": "واحدة من الجمل الآتية صحيحة من حيث العدد والمعدود:",
    "options": [
      "هؤلاء تسعةُ طالباتٍ",
      "هؤلاء تسعُ طالباتٍ",
      "هؤلاء تسعةُ طالبةً",
      "هؤلاء تسعْ طالباتٍ"
    ],
    "answer": "هؤلاء تسعُ طالباتٍ"
  },
  {
    "question": "إحدى الكلمات الآتية همزتها همزة قطع:",
    "options": [
      "اثنان",
      "استنتج",
      "اقدم",
      "انتصر"
    ],
    "answer": "اقدم"
  },
  {
    "question": "يضْبط آخر كلمة (عثمان) فيما يأتي: قرأتُ عن عثمان وكرمِه",
    "options": [
      "تنوين بالفتح",
      "فتحة",
      "كسرة",
      "ضمة"
    ],
    "answer": "فتحة"
  },
  {
    "question": "إذا اختلف اللصان ظهر المسروق، حدد نوع الفعلين:",
    "options": [
      "ماض، ماض",
      "مضارع، مضارع",
      "ماض، مضارع",
      "أمر، ماض"
    ],
    "answer": "ماض، ماض"
  },
  {
    "question": "اختر الجملة الصحيحة",
    "options": [
      "أيم الله",
      "ايم الله",
      "آيم الله"
    ],
    "answer": "ايم الله"
  },
  {
    "question": "اختر الجملة الصحيحة",
    "options": [
      "أيمن الله",
      "ايمن الله",
      "آيمن الله"
    ],
    "answer": "ايمن الله"
  },
  {
    "question": "حدث حادث في مكان ونجا 2 فقط، اختر الجملة الصحيحة",
    "options": [
      "ما نجا إلا موظفتان",
      "نجا الموظفون إلا موظفتين"
    ],
    "answer": "ما نجا إلا موظفتان"
  },
  {
    "question": "حدث حادث في مكان ونجا 2 فقط، اختر الجملة الصحيحة",
    "options": [
      "(ا)ما نجا إلا موظفتان",
      "(ب)نجا الموظفون إلا موظفتان",
      "(ج)ما نجا من حادث الماس إلا موظفتان",
      "أ و ج"
    ],
    "answer": "أ و ج"
  },
  {
    "question": "حدث حادث في مكان ونجا 2 فقط، اختر الجملة الصحيحة",
    "options": [
      "ما نجا الموظفون إلا موظفتين",
      "ما نجا الموظفون إلا موظفتان",
      "كلاهما صحيح"
    ],
    "answer": "ما نجا الموظفون إلا موظفتان"
  },
  {
    "question": "حدد نوع كم في (كم عاملًا في المصنع)",
    "options": [
      "استفهامية",
      "خبرية"
    ],
    "answer": "استفهامية"
  },
  {
    "question": "حدد نوع كم في (كم من عامل أتقن عمله)",
    "options": [
      "استفهامية",
      "خبرية"
    ],
    "answer": "خبرية"
  },
  {
    "question": "اختر الكلمة الصحيحة",
    "options": [
      "سوءً",
      "سوءًا"
    ],
    "answer": "سوءًا"
  }

]

    

 
  
    let currentQuestion = 0;

    let score = 0;

    let timer;

    let timeLeft;

    let userAnswers = [];

 

    function closePopup() {

        const popup = document.getElementById("popup");

        popup.style.display = "none";

    }

    function showPopup() {

    const popup = document.getElementById("popup");

    popup.style.display = "block";

}

  function checkPassword() {
    const passwordInput = document.getElementById("password").value;
    const durationInput = parseInt(document.getElementById("duration").value) || 10;
    const questionCountInput = parseInt(document.getElementById("questionCount").value) || questions.length; // استرجاع عدد الأسئلة المحدد

    timeLeft = durationInput * 60;

    if (passwordInput === "577") {
        document.getElementById("login-container").classList.add("hidden");
        document.getElementById("quiz").classList.remove("hidden");
        document.getElementById("result").classList.add("hidden");

        // خلط الأسئلة وتحديد العدد المطلوب
        const shuffledQuestions = [...questions].sort(() => Math.random() - 0.5).slice(0, questionCountInput);
        questions.length = 0;
        questions.push(...shuffledQuestions);

        loadQuestion();
        startTimer();
    } else {
        showPopup(); // عرض النافذة المنبثقة في حالة كلمة مرور خاطئة
    }
}
    function loadQuestion() {

        const questionContainer = document.getElementById("question-container");

      questionContainer.innerHTML = `
    <h2>${questions[currentQuestion].question}</h2>
    ${questions[currentQuestion].options.map((option) => `
        <label>
            <input type="radio" name="option" value="${option}">
            ${option === questions[currentQuestion].answer ? option : option}  <!-- تم إزالة الفئة .correct هنا -->
        </label><br>
    `).join('')}
`;

        document.getElementById("question-info").textContent = `السؤال ${currentQuestion + 1} من ${questions.length}`;

    }

function removeDiacritics(text) {
    // إزالة التشكيل باستخدام regex
    return text.normalize("NFD").replace(/[\u064B-\u0652]/g, "").replace(/\s+/g, " ").trim();
}

    function nextQuestion() {

        const selectedOption = document.querySelector('input[name="option"]:checked');

        if (selectedOption) {

            const answer = selectedOption.value;

            userAnswers[currentQuestion] = answer;

            if (removeDiacritics(answer) === removeDiacritics(questions[currentQuestion].answer)) {

                score++;

            }

            currentQuestion++;

            if (currentQuestion < questions.length) {

                loadQuestion();

            } else {

                showResult();

            }

        } else {

            alert("يرجى اختيار إجابة.");

        }

    }

    function showResult() {

        clearInterval(timer);

        const resultDiv = document.getElementById("result");

        resultDiv.innerHTML = `<h2>نتيجتك: ${score} من ${questions.length}</h2>`;

        const incorrectAnswers = [];

        const correctAnswers = [];

        const timeoutQuestions = [];

        questions.forEach((q, index) => {

            const userAnswer = userAnswers[index];

            if (userAnswer === undefined) {

                timeoutQuestions.push(q.question);

            } else if (removeDiacritics(userAnswer) === removeDiacritics(q.answer)) {

                correctAnswers.push({ question: q.question, userAnswer: userAnswer });

            } else {

                incorrectAnswers.push({ question: q.question, correctAnswer: q.answer, userAnswer: userAnswer });

            }

        });

        if (correctAnswers.length) {

            resultDiv.innerHTML += `<h3>الإجابات الصحيحة:</h3><ul>${correctAnswers.map(item => `<li style="color: black;">${item.question} - إجابتك: <span style="color: green;">${item.userAnswer}</span></li>`).join('')}</ul>`;

        }

        if (incorrectAnswers.length) {

            resultDiv.innerHTML += `<h3>الإجابات الخاطئة:</h3><ul>${incorrectAnswers.map(item => `<li style="color: black;">${item.question} - إجابتك: <span style="color: red;">${item.userAnswer}</span> - <span style="color: green;">الإجابة الصحيحة: ${item.correctAnswer}</span></li>`).join('')}</ul>`;

        }

        if (timeoutQuestions.length) {

            resultDiv.innerHTML += `<h3>الأسئلة التي لم تجب عليها بسبب انتهاء الوقت:</h3><p>${timeoutQuestions.join(', ')}</p>`;

        }

        resultDiv.classList.remove("hidden");

        document.getElementById("quiz").classList.add("hidden");

    }

    function startTimer() {

        timer = setInterval(() => {

            timeLeft--;

            const minutes = Math.floor(timeLeft / 60);

            const seconds = timeLeft % 60;

            document.getElementById("timer").textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            if (timeLeft <= 0) {

                clearInterval(timer);

                showResult();

            }

        }, 1000);

    }

    // إضافة مستمع حدث "Enter" هنا

    document.getElementById("quizForm").addEventListener("keypress", function(event) {

        if (event.key === "Enter") {

            event.preventDefault(); // لمنع السلوك الافتراضي

            nextQuestion(); // الانتقال للسؤال التالي

        }

    });

</script>

</body>

</html>